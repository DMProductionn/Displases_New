import React, { useEffect, useState } from 'react';
import './Header.css';
import { Link } from 'react-router-dom';
import { removeColorCategoryBtn, setBurger } from '../../redux/Slices/Category';
import { useDispatch, useSelector } from 'react-redux';
import CategoryBurger from '../../Buttons/Category/CategoryBurger';
import { TypeRootStore } from '../../redux/store';


export default function Header() {
  const dispatch = useDispatch();
  const [total, setTotal] = useState(0);
  
  const { cart, total_quantity } = useSelector((state: TypeRootStore) => state.Cart)
  const { burger } = useSelector((state: TypeRootStore) => state.Category)
  

  const removeeColorCategoryBtn = () => {
    dispatch(removeColorCategoryBtn());
  };


  useEffect(() => {
    const totalQuantity = cart?.reduce((acc: number, product: {total: {quantity: number}}) => acc + product.total.quantity, 0);
    setTotal(total) 
    setTotal(totalQuantity)
  }, [cart, total])

  console.log(burger);
  
  
  return (
    <header>
      <div className="mb-[15px] p-[15px]">
        <div className="flex items-center justify-between">
          <Link to="/">
            <img
              onClick={removeeColorCategoryBtn}
              className="logo hidden cursor-pointer"
              src="/img/icons/logo/Logo.png"
              alt="logo"
            />
          </Link>
          <div onClick={() => dispatch(setBurger(!burger))} className={burger ? 'burger cursor-pointer' : 'burger burger__active cursor-pointer'}>

            <span className={burger ? 'span' : 'span__active'}></span>
            <span className={burger ? 'span' : 'span__active'}></span>
            <span className={burger ? 'span' : 'span__active'}></span>

          </div>
          <ul className={burger ? 'menu__list' : 'menu__list list__active'} id="menu">
              <CategoryBurger />
          </ul>
          <svg
            className="ml-[185px] hidden md:block"
            xmlns="http://www.w3.org/2000/svg"
            width="180"
            height="13"
            viewBox="0 0 180 13"
            fill="none">
            <path
              d="M12.5391 12.0001H0.414062V0.796978H12.5391C13.4922 0.796978 14.4089 0.875103 15.2891 1.03135C16.1693 1.1876 16.9844 1.42198 17.7344 1.73448C18.4896 2.04698 19.1458 2.42458 19.7031 2.86729C20.2604 3.31 20.6953 3.83344 21.0078 4.4376C21.3203 5.04177 21.474 5.69542 21.4688 6.39854C21.474 7.09646 21.3177 7.7475 21 8.35167C20.6823 8.95583 20.2422 9.47927 19.6797 9.92198C19.1224 10.3595 18.4688 10.7371 17.7188 11.0548C16.9688 11.3725 16.1536 11.6095 15.2734 11.7657C14.3932 11.922 13.4818 12.0001 12.5391 12.0001ZM13.3594 4.0001H5.21094V8.79698H13.3594C13.8229 8.79698 14.2344 8.71885 14.5938 8.5626C14.9531 8.40114 15.2474 8.13812 15.4766 7.77354C15.7057 7.40375 15.8203 6.95062 15.8203 6.41417C15.8203 5.87771 15.7031 5.42458 15.4688 5.05479C15.2396 4.67979 14.9427 4.41156 14.5781 4.2501C14.2188 4.08344 13.8125 4.0001 13.3594 4.0001Z"
              fill="#474747"
            />
            <path d="M22.5859 12.0001V0.796978H27.3828V12.0001H22.5859Z" fill="#474747" />
            <path
              d="M43.7734 4.0001H34.9531C34.6771 4.0001 34.5391 4.13292 34.5391 4.39854C34.5391 4.51833 34.5755 4.61469 34.6484 4.6876C34.7214 4.76052 34.8177 4.79698 34.9375 4.79698H41.3203C42.6589 4.79698 43.8516 4.86469 44.8984 5.0001C45.9453 5.13552 46.8594 5.34646 47.6406 5.63292C48.4219 5.91417 49.0208 6.29177 49.4375 6.76573C49.8542 7.23448 50.0625 7.78917 50.0625 8.42979C50.0625 8.9975 49.8151 9.52094 49.3203 10.0001C48.8307 10.4741 48.1693 10.8647 47.3359 11.172C46.5026 11.4793 45.5443 11.7397 44.4609 11.9532C43.3828 12.1668 42.2474 12.2944 41.0547 12.336C39.862 12.3777 38.6693 12.3725 37.4766 12.3204C36.2839 12.2683 35.1484 12.1303 34.0703 11.9064C32.9922 11.6824 32.0365 11.4116 31.2031 11.0939C30.3698 10.7761 29.7083 10.3725 29.2188 9.88292C28.7292 9.39333 28.487 8.85687 28.4922 8.27354H33.6094C33.6094 8.44542 33.7214 8.57562 33.9453 8.66417C34.1693 8.75271 34.4036 8.79698 34.6484 8.79698H43.9922C44.112 8.79698 44.2083 8.76052 44.2812 8.6876C44.3594 8.61469 44.3984 8.51833 44.3984 8.39854C44.3984 8.13292 44.2578 8.0001 43.9766 8.0001H35.375C35.0365 7.98969 34.6927 7.96885 34.3438 7.9376C34 7.90114 33.6068 7.84646 33.1641 7.77354C32.7266 7.69542 32.3125 7.60427 31.9219 7.5001C31.5365 7.39073 31.1536 7.2501 30.7734 7.07823C30.3932 6.90114 30.0651 6.70583 29.7891 6.49229C29.5182 6.27354 29.2969 6.00792 29.125 5.69542C28.9583 5.38292 28.875 5.04177 28.875 4.67198C28.875 4.05739 29.1146 3.49489 29.5938 2.98448C30.0781 2.47406 30.7266 2.05479 31.5391 1.72667C32.3516 1.39333 33.2839 1.11208 34.3359 0.882915C35.388 0.653749 36.4948 0.515728 37.6562 0.468853C38.8229 0.416769 39.987 0.414165 41.1484 0.46104C42.3151 0.507915 43.4245 0.645936 44.4766 0.875103C45.5339 1.09906 46.4661 1.3725 47.2734 1.69542C48.0859 2.01312 48.7318 2.42198 49.2109 2.92198C49.6901 3.41677 49.9297 3.95844 49.9297 4.54698H44.8125C44.8125 4.3751 44.6979 4.24229 44.4688 4.14854C44.2448 4.04958 44.013 4.0001 43.7734 4.0001Z"
              fill="#474747"
            />
            <path
              d="M68.2266 8.0001H56.3203V12.0001H51.5234V0.796978H68.2266C68.8672 0.796978 69.4479 0.901145 69.9688 1.10948C70.4896 1.3126 70.9089 1.58344 71.2266 1.92198C71.5495 2.26052 71.7969 2.64594 71.9688 3.07823C72.1406 3.51052 72.2266 3.95062 72.2266 4.39854C72.2266 4.84646 72.1406 5.28656 71.9688 5.71885C71.7969 6.15114 71.5495 6.53656 71.2266 6.8751C70.9089 7.21364 70.4896 7.48708 69.9688 7.69542C69.4479 7.89854 68.8672 8.0001 68.2266 8.0001ZM56.3203 4.79698H67.5703C67.6901 4.79698 67.7839 4.75531 67.8516 4.67198C67.9193 4.58864 67.9505 4.4975 67.9453 4.39854C67.9453 4.29958 67.9115 4.20844 67.8438 4.1251C67.776 4.04177 67.6849 4.0001 67.5703 4.0001H56.3203V4.79698Z"
              fill="#474747"
            />
            <path
              d="M73.3516 12.0001V0.796978H78.1484V8.79698H91.4297V12.0001H73.3516Z"
              fill="#474747"
            />
            <path
              d="M110.617 12.0001L108.312 8.0001H99.9141L97.5938 12.0001H92.0703L98.5156 0.796978H109.688L116.133 12.0001H110.617ZM101.75 4.79698H106.453L105.992 4.0001H102.211L101.75 4.79698Z"
              fill="#474747"
            />
            <path
              d="M130.602 4.0001H121.781C121.505 4.0001 121.367 4.13292 121.367 4.39854C121.367 4.51833 121.404 4.61469 121.477 4.6876C121.549 4.76052 121.646 4.79698 121.766 4.79698H128.148C129.487 4.79698 130.68 4.86469 131.727 5.0001C132.773 5.13552 133.688 5.34646 134.469 5.63292C135.25 5.91417 135.849 6.29177 136.266 6.76573C136.682 7.23448 136.891 7.78917 136.891 8.42979C136.891 8.9975 136.643 9.52094 136.148 10.0001C135.659 10.4741 134.997 10.8647 134.164 11.172C133.331 11.4793 132.372 11.7397 131.289 11.9532C130.211 12.1668 129.076 12.2944 127.883 12.336C126.69 12.3777 125.497 12.3725 124.305 12.3204C123.112 12.2683 121.977 12.1303 120.898 11.9064C119.82 11.6824 118.865 11.4116 118.031 11.0939C117.198 10.7761 116.536 10.3725 116.047 9.88292C115.557 9.39333 115.315 8.85687 115.32 8.27354H120.438C120.438 8.44542 120.549 8.57562 120.773 8.66417C120.997 8.75271 121.232 8.79698 121.477 8.79698H130.82C130.94 8.79698 131.036 8.76052 131.109 8.6876C131.188 8.61469 131.227 8.51833 131.227 8.39854C131.227 8.13292 131.086 8.0001 130.805 8.0001H122.203C121.865 7.98969 121.521 7.96885 121.172 7.9376C120.828 7.90114 120.435 7.84646 119.992 7.77354C119.555 7.69542 119.141 7.60427 118.75 7.5001C118.365 7.39073 117.982 7.2501 117.602 7.07823C117.221 6.90114 116.893 6.70583 116.617 6.49229C116.346 6.27354 116.125 6.00792 115.953 5.69542C115.786 5.38292 115.703 5.04177 115.703 4.67198C115.703 4.05739 115.943 3.49489 116.422 2.98448C116.906 2.47406 117.555 2.05479 118.367 1.72667C119.18 1.39333 120.112 1.11208 121.164 0.882915C122.216 0.653749 123.323 0.515728 124.484 0.468853C125.651 0.416769 126.815 0.414165 127.977 0.46104C129.143 0.507915 130.253 0.645936 131.305 0.875103C132.362 1.09906 133.294 1.3725 134.102 1.69542C134.914 2.01312 135.56 2.42198 136.039 2.92198C136.518 3.41677 136.758 3.95844 136.758 4.54698H131.641C131.641 4.3751 131.526 4.24229 131.297 4.14854C131.073 4.04958 130.841 4.0001 130.602 4.0001Z"
              fill="#474747"
            />
            <path
              d="M142.992 8.0001V8.79698H157.078V12.0001H138.195V0.796978H156.273V4.0001H142.992V4.79698H154.039V8.0001H142.992Z"
              fill="#474747"
            />
            <path
              d="M173.305 4.0001H164.484C164.208 4.0001 164.07 4.13292 164.07 4.39854C164.07 4.51833 164.107 4.61469 164.18 4.6876C164.253 4.76052 164.349 4.79698 164.469 4.79698H170.852C172.19 4.79698 173.383 4.86469 174.43 5.0001C175.477 5.13552 176.391 5.34646 177.172 5.63292C177.953 5.91417 178.552 6.29177 178.969 6.76573C179.385 7.23448 179.594 7.78917 179.594 8.42979C179.594 8.9975 179.346 9.52094 178.852 10.0001C178.362 10.4741 177.701 10.8647 176.867 11.172C176.034 11.4793 175.076 11.7397 173.992 11.9532C172.914 12.1668 171.779 12.2944 170.586 12.336C169.393 12.3777 168.201 12.3725 167.008 12.3204C165.815 12.2683 164.68 12.1303 163.602 11.9064C162.523 11.6824 161.568 11.4116 160.734 11.0939C159.901 10.7761 159.24 10.3725 158.75 9.88292C158.26 9.39333 158.018 8.85687 158.023 8.27354H163.141C163.141 8.44542 163.253 8.57562 163.477 8.66417C163.701 8.75271 163.935 8.79698 164.18 8.79698H173.523C173.643 8.79698 173.74 8.76052 173.812 8.6876C173.891 8.61469 173.93 8.51833 173.93 8.39854C173.93 8.13292 173.789 8.0001 173.508 8.0001H164.906C164.568 7.98969 164.224 7.96885 163.875 7.9376C163.531 7.90114 163.138 7.84646 162.695 7.77354C162.258 7.69542 161.844 7.60427 161.453 7.5001C161.068 7.39073 160.685 7.2501 160.305 7.07823C159.924 6.90114 159.596 6.70583 159.32 6.49229C159.049 6.27354 158.828 6.00792 158.656 5.69542C158.49 5.38292 158.406 5.04177 158.406 4.67198C158.406 4.05739 158.646 3.49489 159.125 2.98448C159.609 2.47406 160.258 2.05479 161.07 1.72667C161.883 1.39333 162.815 1.11208 163.867 0.882915C164.919 0.653749 166.026 0.515728 167.188 0.468853C168.354 0.416769 169.518 0.414165 170.68 0.46104C171.846 0.507915 172.956 0.645936 174.008 0.875103C175.065 1.09906 175.997 1.3725 176.805 1.69542C177.617 2.01312 178.263 2.42198 178.742 2.92198C179.221 3.41677 179.461 3.95844 179.461 4.54698H174.344C174.344 4.3751 174.229 4.24229 174 4.14854C173.776 4.04958 173.544 4.0001 173.305 4.0001Z"
              fill="#474747"
            />
          </svg>
          <div>
            <ul className="flex gap-3 items-center">
              <li className='h-[26px]'>
              <Link to="/cart">
                  <button className='relative'>
                  <svg width="28" height="28" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.75725 1.07127C5.99404 1.21334 6.07082 1.52047 5.92875 1.75726L3.3831 6.00001H12.6169L10.0713 1.75726C9.92918 1.52047 10.006 1.21334 10.2428 1.07127C10.4795 0.929194 10.7867 1.00598 10.9287 1.24277L13.7831 6.00001H15C15.5523 6.00001 16 6.44773 16 7.00001V8.00001C16 8.5523 15.5523 9.00001 15 9.00001V13.5003C15 14.881 13.8806 16 12.5 16H3.5C2.11937 16 1 14.881 1 13.5003V9.00001C0.447715 9.00001 0 8.5523 0 8.00001V7.00001C0 6.44773 0.447715 6.00001 1 6.00001H2.2169L5.07125 1.24277C5.21333 1.00598 5.52046 0.929194 5.75725 1.07127ZM2 9.00001V13.5003C2 14.3286 2.67149 15 3.5 15H12.5C13.3285 15 14 14.3286 14 13.5003V9.00001H2ZM1 7.00001V8.00001H15V7.00001H1ZM4 10C4.27614 10 4.5 10.2239 4.5 10.5V13.5C4.5 13.7762 4.27614 14 4 14C3.72386 14 3.5 13.7762 3.5 13.5V10.5C3.5 10.2239 3.72386 10 4 10ZM6 10C6.27614 10 6.5 10.2239 6.5 10.5V13.5C6.5 13.7762 6.27614 14 6 14C5.72386 14 5.5 13.7762 5.5 13.5V10.5C5.5 10.2239 5.72386 10 6 10ZM8 10C8.27614 10 8.5 10.2239 8.5 10.5V13.5C8.5 13.7762 8.27614 14 8 14C7.72386 14 7.5 13.7762 7.5 13.5V10.5C7.5 10.2239 7.72386 10 8 10ZM10 10C10.2761 10 10.5 10.2239 10.5 10.5V13.5C10.5 13.7762 10.2761 14 10 14C9.72386 14 9.5 13.7762 9.5 13.5V10.5C9.5 10.2239 9.72386 10 10 10ZM12 10C12.2761 10 12.5 10.2239 12.5 10.5V13.5C12.5 13.7762 12.2761 14 12 14C11.7239 14 11.5 13.7762 11.5 13.5V10.5C11.5 10.2239 11.7239 10 12 10Z" fill="#fff"/>
                  </svg>
                  <div className='w-[18px] h-[18px] bg-red rounded-[50%] flex items-center justify-center absolute right-[0px] -bottom-[10px]'>
                    <p className='mt-[1px]'>{total ? total : 0}</p>
                  </div>
                  </button>
                </Link>
              </li>
              <li>
                <Link to="/signup">
                  <button className="bg-[#333232] rounded-[6px] min-w-[103px] min-h-[33px] text-[12px] text-[#fff]">
                    Sign up
                  </button>
                </Link>
              </li>

              <li>
                <Link to="/signin">
                  <button className="bg-[#fff] rounded-[6px] min-w-[103px] min-h-[33px] text-[#111] text-[12px]">
                    Sign in
                  </button>
                </Link>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
  );
}
